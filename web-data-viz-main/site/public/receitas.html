<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./css/styleReceitas.css" />
  </head>
  <style></style>

  <body>
    <header class="header" id="header">
      <nav>
        <div>
          <a href="index.html">
            <img style="width: 70%" src="../assets/logo.png" />
          </a>
        </div>
        <div style="display: flex; align-items: center">
          <div>
            <div class="dropdown">
              <button class="dropbtn">
                <a href="receitas.html"> RECEITAS </a>
              </button>
              <div class="dropdown-content">
                <a href="receitas.html#cardDoces">DOCES</a>
                <div style="display: flex; justify-content: center">
                  <hr class="hrDropdown" />
                </div>
                <a href="receitas.html#cardSalgados">SALGADOS</a>
                <div style="display: flex; justify-content: center">
                  <hr class="hrDropdown" />
                </div>
                <a href="receitas.html#cardDrinks">DRINKS</a>
              </div>
            </div>
          </div>
          <div>
            <hr class="hrMenu" />
          </div>
          <div>
            <div class="dropdown">
              <button class="dropbtn">
                <a href="gastronomia.html"> GASTRONOMIA </a>
              </button>
              <div class="dropdown-content">
                <a href="gastronomia.html#divOQGastronomia">O QUE É?</a>
                <div style="display: flex; justify-content: center">
                  <hr class="hrDropdown" />
                </div>
                <a href="gastronomia.html#divComoChegou"
                  >COMO CHEGOU<br />
                  EM MINHA VIDA?</a
                >
              </div>
            </div>
          </div>
          <div>
            <hr class="hrMenu" />
          </div>
          <div>
            <a href="cadastro.html" id="naoCadastrado" style="display: block">
              <img src="../assets/Account circle.svg" />
            </a>
            <a href="metricas.html" id="cadastrado" style="display: none">
              <p id="nomeUsuario"></p>
            </a>
          </div>
        </div>
      </nav>
    </header>

    <div style="margin-top: 6%" id="telaReceitas">
      <div id="divDoces">
        <div style="display: flex; justify-content: center">
          <div style="display: flex; width: 92%">
            <div>
              <p style="margin-bottom: 6.5px; color: #aa4378; font-weight: 700">
                DOCES
              </p>
            </div>
            <div style="width: 100%; align-items: flex-end; display: flex">
              <hr
                style="margin-left: 1px; width: 100%; border: 1px dashed gray"
              />
            </div>
          </div>
        </div>
        <div
          style="display: flex; justify-content: space-evenly"
          id="cardDoces"
        ></div>
      </div>
      <div id="divSalgados">
        <div style="display: flex; justify-content: center">
          <div style="display: flex; width: 92%">
            <div>
              <p style="margin-bottom: 6.5px; color: #aa4378; font-weight: 700">
                SALGADOS
              </p>
            </div>
            <div style="width: 100%; align-items: flex-end; display: flex">
              <hr
                style="margin-left: 1px; width: 100%; border: 1px dashed gray"
              />
            </div>
          </div>
        </div>
        <div
          style="display: flex; justify-content: space-evenly"
          id="cardSalgados"
        ></div>
      </div>
      <div id="divDrinks">
        <div style="display: flex; justify-content: center">
          <div style="display: flex; width: 92%">
            <div>
              <p style="margin-bottom: 6.5px; color: #aa4378; font-weight: 700">
                DRINKS
              </p>
            </div>
            <div style="width: 100%; align-items: flex-end; display: flex">
              <hr
                style="margin-left: 1px; width: 100%; border: 1px dashed gray"
              />
            </div>
          </div>
        </div>
        <div
          style="display: flex; justify-content: space-evenly"
          id="cardDrinks"
        ></div>
      </div>
    </div>

    <div id="telaReceita" style="display: none">
      <div
        style="
          display: flex;
          align-items: center;
          width: 5%;
          margin-left: 2%;
          margin-top: 2%;
          cursor: pointer;
        "
        onclick="VoltarTelaReceita()"
      >
        <img
          style="rotate: -90deg; width: 55%"
          src="../assets/icons8-divisa-circulada-acima-100.png"
        />
        <span style="color: black; margin-left: 5%">VOLTAR</span>
      </div>
      <div style="width: 100%">
        <div
          id="titleReceita"
          style="display: flex; justify-content: center"
        ></div>

        <div
          id="imgReceita"
          style="display: flex; justify-content: center"
        ></div>
        <div style="display: flex; justify-content: center; margin-top: 4%">
          <h2>HISTÓRIA DA RECEITA:</h2>
        </div>
        <div style="display: flex; justify-content: center">
          <div id="descCompleta" style="width: 50%"></div>
        </div>
        <div style="display: flex; justify-content: center; margin-top: 4%">
          <h2>INGREDIENTES:</h2>
          <select id="qntdReceitas" onvaluechange="AtualizarValores()">
            <option value="0.5">1/2 receita</option>
            <option value="1" selected>1 receita</option>
            <option value="1.5">1 e 1/2 receita</option>
            <option value="2">2 receitas</option>
            <option value="2.5">2 e 1/2 receitas</option>
            <option value="3">3 receitas</option>
          </select>
        </div>
        <div>
          <div style="display: flex; justify-content: center">
            <div id="ingredientesCompletos" style="width: 50%"></div>
          </div>
        </div>
        <div style="display: flex; justify-content: center; margin-top: 4%">
          <h2>MODO DE PREPARO:</h2>
        </div>
        <div>
          <div style="display: flex; justify-content: center">
            <div id="modoDePreparoCompleto" style="width: 50%"></div>
          </div>
        </div>
      </div>
    </div>
    <!-- Footer -->

    <footer id="footer" style="background-color: #76c9c7">
      <div
        style="
          display: flex;
          align-items: center;
          padding: 3% 3%;
          justify-content: space-around;
        "
      >
        <div style="width: 100%">
          <img style="width: 35%" src="../assets/logoOpacidade.png" />
        </div>
        <div style="width: 100%">
          <p>TODOS DIREITOS RESERVADOS &reg;</p>
        </div>
        <div style="width: 32%">
          <div style="display: flex; align-items: center; width: 100%">
            <a style="width: 11%" href=""
              ><img style="width: 100%" src="../assets/facebook-f.svg"
            /></a>
            <a style="width: 18%; margin: 0 10%" href=""
              ><img style="width: 100%" src="../assets/instagram.svg"
            /></a>
            <a style="width: 18%" href=""
              ><img style="width: 100%" src="../assets/linkedin.svg"
            /></a>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
<script>
  nomeUsuario.innerHTML = `${sessionStorage.getItem("NOMEUSUARIO")}`;
  var teste = sessionStorage.getItem("NOMEUSUARIO");
  if (teste != "" || teste == undefined || teste == null) {
    naoCadastrado.style.display = "none";
    cadastrado.style.display = "block";
  } else {
    naoCadastrado.style.display = "block";
    cadastrado.style.display = "none";
  }

  const containerDoces = document.getElementById("cardDoces");
  const containerSalgados = document.getElementById("cardSalgados");
  const containerDrinks = document.getElementById("cardDrinks");

  var arrayDoces = [];
  var arraySalgados = [];
  var arrayDrinks = [];
  GetDoces();
  GetSalgados();
  GetDrinks();

  var qntdReceita = 1;
  function VerMaisDoces(num) {
    telaReceitas.style.display = "none";
    telaReceita.style.display = "block";
    if (num == 1) {
      titleReceita.innerHTML = `<p style="font-size: 40px;"><b>${arrayDoces[0].nomeReceita}</b></p>`;
      imgReceita.innerHTML = `<img style="width: 40%;" src="${arrayDoces[0].caminhoImgReceita}" />`;
      descCompleta.innerHTML = `${arrayDoces[0].descReceitaCompleta}<small>Tudo Gostoso</small>`;
      ingredientesCompletos.innerHTML = `<b>MASSA</b>
        <ul>
          <li>${60 * qntdReceita} g de farinha de trigo</li>
          <li>${150 * qntdReceita} g de farinha de amêndoas</li>
          <li>${150 * qntdReceita} g de açúcar de confeiteiro</li>
          <li>${4 * qntdReceita} ovos + ${4 * qntdReceita} claras</li>
          <li>${40 * qntdReceita} g de açúcar refinado</li>
          <li>${3 * qntdReceita} colheres (sopa) de manteiga derretida</li>
        </ul>
          
        <b>CREME DE MANTEIGA</b>
        <ul>
          <li>${200 * qntdReceita} g de açúcar</li>
          <li>${40 * qntdReceita} ml de água</li>
          <li>${1 * qntdReceita} ovo + ${2 * qntdReceita} gemas</li>
          <li>${350 * qntdReceita} g de manteiga</li>
          <li>${85 * qntdReceita} g de chocolate derretido</li>
          <li>${1 * qntdReceita} colher (café) de café solúvel</li>
        </ul>

        <b>GANACHE DE CHOCOLATE</b>
        <ul>
          <li>${300 * qntdReceita} g de chocolate meio amargo</li>
          <li>${200 * qntdReceita} g de creme de leite</li>
        </ul>
        <b>PARA MONTAR A TORTA</b>
        <ul>
          <li>Chocolate derretido</li>
          <li>Café + conhaque</li>
          <li>${200 * qntdReceita} g de chocolate ao leite derretido</li>
          <li>${1 * qntdReceita} colher (sopa) de óleo</li>  
        </ul>`;
      modoDePreparoCompleto.innerHTML = `${arrayDoces[0].modoPreparo}`;
    } else if (num == 2) {
      titleReceita.innerHTML = `<p style="font-size: 40px;"><b>${arrayDoces[1].nomeReceita}</b></p>`;
      imgReceita.innerHTML = `<img style="width: 40%;" src="${arrayDoces[1].caminhoImgReceita}" />`;
      descCompleta.innerHTML = `${arrayDoces[1].descReceitaCompleta}`;
      ingredientesCompletos.innerHTML = `
      <h4><b>MASSA</b></h4>
      <ul>
      <li>${3 * qntdReceita} colheres (sopa) de manteiga</li>  
      <li>${100 * qntdReceita} ml de leite aquecido chocolate em pó</li>  
      <li>${2 * qntdReceita} e ${
        0.5 * qntdReceita
      } colheres (sopa) de chocolate em pó</li>
      <li>${1 * qntdReceita} e ${
        0.5 * qntdReceita
      } colher (sopa) de corante vermelho em gel</li>
      <li>${4 * qntdReceita} ovos</li>
      <li>${1 * qntdReceita} e ${0.25 * qntdReceita} de xícara de açúcar</li>
      <li>${1 * qntdReceita} xícara e ${
        0.5 * qntdReceita
      } colher (sopa) de farinha de trigo</li>
      <li>${0.5 * qntdReceita} colher (sopa) de fermento em pó</li>
      <li>${0.5 * qntdReceita} colher (chá) de vinagre branco</li>
      </ul>
      <small>Tudo Gostoso</small>`;
      // modoDePreparoCompleto.innerHTML = ``;
      modoDePreparoCompleto.innerHTML = `${arrayDoces[1].modoPreparo}`;
    } else if (num == 3) {
      titleReceita.innerHTML = `<p style="font-size: 40px;"><b>${arrayDoces[2].nomeReceita}</b></p>`;
      imgReceita.innerHTML = `<img style="width: 40%;" src="${arrayDoces[2].caminhoImgReceita}" />`;
      descCompleta.innerHTML = `${arrayDoces[2].descReceitaCompleta}<small>Tudo Gostoso</small>`;
      ingredientesCompletos.innerHTML = `
      <ul>
        <li>300g de morangos frescos</li> 
        <li>150g de açúcar</li>
        <li>Suco de 1/2 limão</li>
        <li>5 folhas de gelatina + 5 colheres (sopa) de água fria para hidratar</li>
        <li>300ml de creme de leite fresco</li>
        <li>100ml de creme de leite fresco</li>
        <li>2 colheres (sopa) de açúcar</li>
        <li>1/2 colher (chá) de baunilha</li>
      </ul>
      `;
      modoDePreparoCompleto.innerHTML = `${arrayDoces[2].modoPreparo}`;
    }
  }
  function VerMaisSalgados(num) {
    telaReceitas.style.display = "none";
    telaReceita.style.display = "block";
    if (num == 1) {
      titleReceita.innerHTML = `<p style="font-size: 40px;"><b>${arraySalgados[0].nomeSalgado}</b></p>`;
      imgReceita.innerHTML = `<img style="width: 40%;" src="${arraySalgados[0].imgSalgado}" />`;
      descCompleta.innerHTML = `${arraySalgados[0].descSalgadoCompleto}<small>Tudo Gostoso</small>`;
      ingredientesCompletos.innerHTML = `${arraySalgados[0].ingredientesCompletos}`;
      modoDePreparoCompleto.innerHTML = `${arraySalgados[0].modoDePreparo}`;
    } else if (num == 2) {
      titleReceita.innerHTML = `<p style="font-size: 40px;"><b>${arraySalgados[1].nomeSalgado}</b></p>`;
      imgReceita.innerHTML = `<img style="width: 40%;" src="${arraySalgados[1].imgSalgado}" />`;
      descCompleta.innerHTML = `${arraySalgados[1].descSalgadoCompleto}<small>Tudo Gostoso</small>`;
      ingredientesCompletos.innerHTML = `${arraySalgados[1].ingredientesCompletos}`;
      modoDePreparoCompleto.innerHTML = `${arraySalgados[1].modoDePreparo}`;
    } else if (num == 3) {
      titleReceita.innerHTML = `<p style="font-size: 40px;"><b>${arraySalgados[2].nomeSalgado}</b></p>`;
      imgReceita.innerHTML = `<img style="width: 40%;" src="${arraySalgados[2].imgSalgado}" />`;
      descCompleta.innerHTML = `${arraySalgados[2].descSalgadoCompleto}<small>Tudo Gostoso</small>`;
      ingredientesCompletos.innerHTML = `${arraySalgados[2].ingredientesCompletos}`;
      modoDePreparoCompleto.innerHTML = `${arraySalgados[2].modoDePreparo}`;
    }
  }
  function VerMaisDrinks(num) {
    telaReceitas.style.display = "none";
    if (num == 7) {
    } else if (num == 8) {
    } else if (num == 9) {
    }
  }
  const el = document.querySelector("#header");
  const observer = new IntersectionObserver(
    ([e]) => e.target.classList.toggle("is-pinned", e.intersectionRatio < 1),
    { threshold: [1] }
  );

  observer.observe(el);

  function VoltarTelaReceita() {
    titleReceita.innerHTML = "";
    imgReceita.innerHTML = "";
    descCompleta.innerHTML = "";
    ingredientesCompletos.innerHTML = "";
    modoDePreparoCompleto.innerHTML = "";
    telaReceitas.style.display = "block";
    telaReceita.style.display = "none";
  }

  // Doces

  function GetDoces() {
    fetch(`/receitas/listarDoces`)
      .then(function (response) {
        if (response.ok) {
          response.json().then(function (resposta) {
            console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
            arrayDoces = resposta;
            CriarCardsDoces();
          });
        } else {
          console.error("Nenhum dado encontrado ou erro na API");
        }
      })
      .catch(function (error) {
        console.error(
          `Erro na obtenção dos dados p/ idEmpresa: ${error.message}`
        );
      });
  }

  function CriarCardsDoces() {
    arrayDoces.forEach((x) => {
      const contentDoces = `
        <div class="card">
            <div>
                
                <div id="imgDoce">
                    <img class="imgsDoce" src="${x.caminhoImgReceita}" />
                </div>
                <div class="flexCenter">
                    <p id="titleDoce" style="margin-bottom: 0;">${x.nomeReceita}</p>
                </div>
                <div>
                    <hr style="width: 80%; border: 0.5% solid black;">
                </div>
                <div>
                    <p id="descDoce${x.nomeBtn}" style="text-align: center;">
                        ${x.descReceitaCard}
                    </p>
                </div>
                <div style="display:flex; align-items:end;" id="btnVerMais${x.nomeBtn}" onclick="VerMaisDoces(${x.idReceita})">
                    <button class="btnCards">
                        VER MAIS
                    </button>
                </div>
        </div>

        `;
      var btn = `btnVerMais${x.nomeBtn}`;
      var ajusteBtn = `descDoce${x.nomeBtn}`;

      containerDoces.innerHTML += contentDoces;

      if (document.getElementById(ajusteBtn).clientHeight <= 76) {
        document.getElementById(btn).style.marginTop = "33px";
      }
    });
  }

  // Salgados

  function GetSalgados() {
    fetch(`/receitas/listarSalgados`)
      .then(function (response) {
        if (response.ok) {
          response.json().then(function (resposta) {
            console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
            arraySalgados = resposta;
            CriarCardsSalgados();
          });
        } else {
          console.error("Nenhum dado encontrado ou erro na API");
        }
      })
      .catch(function (error) {
        console.error(
          `Erro na obtenção dos dados p/ idEmpresa: ${error.message}`
        );
      });
  }

  function CriarCardsSalgados() {
    arraySalgados.forEach((y) => {
      const contentSalgados = `
        <div class="card">
            <div>
                <div id="imgSalgado">
                    <img class="imgsDoce" src="${y.caminhoImgReceita}" />
                </div>
                <div class="flexCenter">
                    <p id="titleSalgado" style="margin-bottom: 0;">${y.nomeReceita}</p>
                </div>
                <div>
                    <hr style="width: 80%; border: 0.5% solid black;">
                </div>
                <div>
                    <p id="descSalgado${y.nomeBtn}" style="text-align: center;">
                        ${y.descReceitaCard}
                    </p>
                </div>
                <div style="display:flex; align-items:end;">
                    <button class="btnCards" id="btnVerMais${y.nomeBtn}" onclick="VerMaisSalgados(${y.idReceita})">
                        VER MAIS
                    </button>
                </div>
            </div>
        </div>
        `;
      containerSalgados.innerHTML += contentSalgados;

      var btn = `btnVerMais${y.nomeBtn}`;
      var ajusteBtn = `descSalgado${y.nomeBtn}`;

      if (document.getElementById(ajusteBtn).clientHeight <= 76) {
        document.getElementById(btn).style.marginTop = "17px";
      }
    });
  }

  // Drinks

  function GetDrinks() {
    fetch(`/receitas/listarDrinks`)
      .then(function (response) {
        if (response.ok) {
          response.json().then(function (resposta) {
            console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
            arrayDrinks = resposta;
            CriarCardsDrinks();
          });
        } else {
          console.error("Nenhum dado encontrado ou erro na API");
        }
      })
      .catch(function (error) {
        console.error(
          `Erro na obtenção dos dados p/ idEmpresa: ${error.message}`
        );
      });
  }

  function CriarCardsDrinks() {
    arrayDrinks.forEach((z) => {
      const contentDrinks = `
        <div class="card">
            <div>
                <div id="imgDrinks">
                    <img class="imgsDoce" src="${z.caminhoImgReceita}" />
                </div>
                <div class="flexCenter">
                    <p id="titleDrink" style="margin-bottom: 0;">${z.nomeReceita}</p>
                </div>
                <div>
                    <hr style="width: 80%; border: 0.5% solid black;">
                </div>
                <div>
                    <p id="descDrink${z.nomeBtn}" style="text-align: center;">
                        ${z.descReceitaCard}
                    </p>
                </div>
                <div style="display:flex; align-items:end;">
                    <button class="btnCards" id="btnVerMais${z.nomeBtn}" onclick="VerMaisDrinks(${z.idReceita})">
                        VER MAIS
                    </button>
                </div>
            </div>
        </div>
        `;
      containerDrinks.innerHTML += contentDrinks;

      var btn = `btnVerMais${z.nomeBtn}`;
      var ajusteBtn = `descDrink${z.nomeBtn}`;

      if (document.getElementById(ajusteBtn).clientHeight <= 76) {
        document.getElementById(btn).style.marginTop = "38px";
      }
    });
  }

  document.getElementById("qntdReceitas").onchange = function () {
    AtualizarValores();
  };
  function AtualizarValores() {
    qntdReceita = Number(qntdReceitas.value);
    ingredientesCompletos.innerHTML = `<b>MASSA</b>
        <ul>
          <li>${60 * qntdReceita} g de farinha de trigo</li>
          <li>${150 * qntdReceita} g de farinha de amêndoas</li>
          <li>${150 * qntdReceita} g de açúcar de confeiteiro</li>
          <li>${4 * qntdReceita} ovos + ${4 * qntdReceita} claras</li>
          <li>${40 * qntdReceita} g de açúcar refinado</li>
          <li>${3 * qntdReceita} colheres (sopa) de manteiga derretida</li>
        </ul>
          
        <b>CREME DE MANTEIGA</b>
        <ul>
          <li>${200 * qntdReceita} g de açúcar</li>
          <li>${40 * qntdReceita} ml de água</li>
          <li>${1 * qntdReceita} ovo + ${2 * qntdReceita} gemas</li>
          <li>${350 * qntdReceita} g de manteiga</li>
          <li>${85 * qntdReceita} g de chocolate derretido</li>
          <li>${1 * qntdReceita} colher (café) de café solúvel</li>
        </ul>

        <b>GANACHE DE CHOCOLATE</b>
        <ul>
          <li>${300 * qntdReceita} g de chocolate meio amargo</li>
          <li>${200 * qntdReceita} g de creme de leite</li>
        </ul>
        <b>PARA MONTAR A TORTA</b>
        <ul>
          <li>Chocolate derretido</li>
          <li>Café + conhaque</li>
          <li>${200 * qntdReceita} g de chocolate ao leite derretido</li>
          <li>${1 * qntdReceita} colher (sopa) de óleo</li>  
        </ul>`;
  }
</script>
